import{y as f,r as i,z as h,l as v,j as e,d as j}from"./index-srWOAwSu.js";import{P as w}from"./purify.es-DFgbIEQX.js";import{u as C}from"./images-2jxxSwBI.js";import{P as p}from"./PostThumbnail-BN4rjGr2.js";import"./index-DZQw_b3Y.js";import"./users-DR85bDyw.js";function k(){const a=f.useRouteContext(),[l,o]=i.useState(!1),[c,d]=i.useState("Popular"),n=i.useRef(null),{data:r,isLoading:u,error:x}=C(h(a.communityId)),{searchContent:t}=v();function m(s){n.current&&!n.current.contains(s.target)&&o(!1)}return i.useEffect(()=>(document.addEventListener("click",m),()=>document.removeEventListener("click",m)),[]),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"mx-auto w-full md:w-[50%] pt-[70px] pb-5 ",children:[e.jsxs("div",{className:"flex pt-10",children:[e.jsx("div",{className:"pt-5",children:e.jsx("img",{src:j,alt:"",className:"rounded-full w-[100px] h-[100px]"})}),e.jsxs("div",{className:"text-4xl font-bold pt-20 ml-2",children:["c/",a.title]})]}),e.jsxs("div",{ref:n,className:"relative mx-auto w-full 2xl:w-[750px] flex pt-5",children:[e.jsxs("div",{onClick:()=>o(!l),className:"flex cursor-pointer pl-4 md:pl-0 md:pt-1 hover:text-cyan-500 transition-all ease-in-out duration-300",children:[e.jsx("div",{className:"text-xs",children:c}),e.jsx("div",{className:"ml-2",children:e.jsx(w,{})})]}),l&&e.jsxs("div",{onClick:()=>{},className:"absolute top-6 left-0 bg-[#444444] px-5 py-2 z-50 shadow-[0_0_15px_rgba(0,0,0,0.7)]",children:[e.jsx("div",{onClick:()=>{d("Popular"),o(!1)},className:" py-1 cursor-pointer hover:text-cyan-500 transition-all ease-in-out duration-300",children:"Popular"}),e.jsx("div",{onClick:()=>{d("New"),o(!1)},className:"py-1 cursor-pointer hover:text-cyan-500 transition-all ease-in-out duration-300",children:"New"})]})]})]}),c==="Popular"?e.jsx("div",{children:u?e.jsx("div",{children:"Loading..."}):x?e.jsx("div",{children:"Error fetching posts"}):r?r.filter(s=>t===""||s.title.toLowerCase().includes(t.toLowerCase())||s.content.toLowerCase().includes(t.toLowerCase())).map(s=>e.jsx(p,{post:s},s.postId)):e.jsx("div",{})}):e.jsx("div",{children:u?e.jsx("div",{children:"Loading..."}):x?e.jsx("div",{children:"Error fetching posts"}):r?r.filter(s=>t===""||s.title.toLowerCase().includes(t.toLowerCase())||s.content.toLowerCase().includes(t.toLowerCase())).map(s=>e.jsx(p,{post:s},s.postId)):e.jsx("div",{})})]})})}export{k as component};
