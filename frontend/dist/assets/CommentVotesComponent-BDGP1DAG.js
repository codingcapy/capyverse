import{u as f,a as h,j as o}from"./index-GLINFU8r.js";import{u as j}from"./images-C3FtBcbP.js";import{j as g,k as P,l as y,m as C,n as V,o as w,p as N}from"./Menu-BHD2Vb-J.js";function D(r){const{data:n,isLoading:l,isError:c}=j(g(r.comment.commentId)),{mutate:m,isPending:p}=P(),{mutate:i,isPending:v}=y(),{user:t}=f(),I=h();function a(e,s,d){if(e.preventDefault(),e.stopPropagation(),p||v)return;const u=n&&n.find(x=>t&&x.userId===t.userId);t&&u?i({voteId:u.voteId,value:d}):t?m({userId:t&&t.userId||"",postId:s.postId,commentId:s.commentId,value:d}):I({to:"/login"})}return o.jsx("div",{children:c?o.jsx("div",{children:"Error fetching votes"}):l?o.jsx("div",{children:"Loading..."}):n?o.jsxs("div",{className:"flex w-fit rounded-full py-1 justify-center",children:[n.filter(e=>t&&e.userId===t.userId&&e.value===1).length>0?o.jsx("div",{onClick:e=>{e.stopPropagation(),e.preventDefault(),i({voteId:n.find(s=>s.postId===r.comment.postId&&t&&s.userId===t.userId&&s.value===1).voteId,value:0})},className:"pr-2 cursor-pointer hover:text-cyan-500 transition-all ease-in-out duration-300",children:o.jsx(C,{size:20})}):o.jsx("div",{onClick:e=>{a(e,r.comment,1)},className:"pr-2 cursor-pointer hover:text-cyan-500 transition-all ease-in-out duration-300",children:o.jsx(V,{size:20})}),o.jsx("div",{className:"",children:n.filter(e=>e.postId===r.comment.postId).reduce((e,s)=>e+s.value,0)}),n.filter(e=>t&&e.userId===t.userId&&e.value===-1).length>0?o.jsx("div",{onClick:e=>{e.stopPropagation(),e.preventDefault(),i({voteId:n.find(s=>s.postId===r.comment.postId&&t&&s.userId===t.userId&&s.value===-1).voteId,value:0})},className:"px-2 cursor-pointer hover:text-cyan-500 transition-all ease-in-out duration-300",children:o.jsx(w,{size:20})}):o.jsx("div",{onClick:e=>{a(e,r.comment,-1)},className:"px-2 cursor-pointer hover:text-cyan-500 transition-all ease-in-out duration-300",children:o.jsx(N,{size:20})})]}):o.jsx("div",{children:"An unexpected error has occured"})})}export{D as C};
