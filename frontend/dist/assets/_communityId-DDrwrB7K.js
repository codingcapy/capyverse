import{E as O,a as U,u as V,b as h,r as a,G as Q,H as R,J as _,j as e,L as M,d as E,K as B,M as F,k as J}from"./index-BCa0rqNy.js";import{a as f}from"./index-jOnCPZC0.js";function H(){const{communityId:m}=O.useParams(),x=U(),{user:d}=V(),{data:t,isLoading:b,error:y}=h(B(m)),{data:g,isLoading:L,error:P}=h(F(m)),{data:s,isLoading:I,error:D}=h(J(m)),[o,N]=a.useState("mods"),[u,n]=a.useState("none"),[w,p]=a.useState(s?s.description:""),[c,r]=a.useState(s?s.visibility:"public"),[l,v]=a.useState(s?s.mature:!1),{mutate:$,isPending:C}=Q(),{mutate:A,isPending:S}=R(),{mutate:z,isPending:k}=_();return a.useEffect(()=>{b||(y&&x({to:"/"}),d||x({to:"/"}),t&&d&&!t.some(i=>i.username===d.username)&&x({to:"/"}))},[d,t]),a.useEffect(()=>{s&&(p(s.description),r(s.visibility),v(s.mature))},[s]),e.jsx("div",{className:"pt-[70px] mx-auto",children:I?e.jsx("div",{className:"p-5 lg:pl-[170px]",children:"Loading community..."}):D?e.jsx("div",{className:"p-5 lg:pl-[170px]",children:"Error loading community"}):s?e.jsxs("div",{className:"p-5 lg:px-0 lg:pl-[170px]",children:[e.jsx("div",{className:"text-3xl font-bold",children:"Settings"}),e.jsxs("div",{className:"my-5",children:[e.jsxs("div",{className:"flex justify-between max-w-[700px] w-[70vw] 2xl:max-w-[1000px] my-2",children:[e.jsx("div",{className:"",children:"Display name"}),e.jsx("div",{children:s.communityId})]}),e.jsxs("div",{className:"flex justify-between max-w-[700px] 2xl:max-w-[1000px]",children:[e.jsx("div",{className:"mr-10",children:"Description"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"line-clamp-1 mr-2",children:s.description}),e.jsx("div",{onClick:()=>n("description"),className:"rotate-270 hover:bg-[#666666] p-2 rounded-full cursor-pointer",children:e.jsx(f,{})})]})]}),e.jsxs("div",{className:"flex justify-between max-w-[700px] 2xl:max-w-[1000px]",children:[e.jsx("div",{className:"",children:"Community Type"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"capitalize mr-2",children:s.visibility}),e.jsx("div",{onClick:()=>n("visibility"),className:"rotate-270 hover:bg-[#666666] p-2 rounded-full cursor-pointer",children:e.jsx(f,{})})]})]}),e.jsxs("div",{className:"flex justify-between max-w-[700px] 2xl:max-w-[1000px]",children:[e.jsx("div",{className:"",children:"Mature (18+)"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"mr-2",children:s.mature?"On":"Off"}),e.jsx("div",{onClick:()=>n("mature"),className:"rotate-270 hover:bg-[#666666] p-2 rounded-full cursor-pointer",children:e.jsx(f,{})})]})]})]}),e.jsx("div",{className:"text-3xl font-bold",children:"Mature (18+)"}),e.jsxs("div",{className:"my-5 flex",children:[e.jsx("div",{onClick:()=>N("mods"),className:`pr-2 cursor-pointer ${o==="mods"&&"underline font-bold"}`,children:"Moderators"}),e.jsx("div",{onClick:()=>N("members"),className:`px-2 cursor-pointer ${o==="members"&&"underline font-bold"}`,children:"Members"})]}),e.jsxs("div",{className:"flex justify-between font-bold border-y border-[#555555] py-2 mb-5",children:[e.jsx("div",{children:"USERNAME"}),e.jsx("div",{children:"JOINED"})]}),o==="mods"?b?e.jsx("div",{children:"Loading moderators..."}):y?e.jsx("div",{children:"Error loading moderators"}):t?o==="mods"?t.map(i=>{const j=new Date(i.createdAt);return e.jsxs("div",{className:"flex justify-between",children:[e.jsx(M,{to:"/u/$username",params:{username:i.username.toString()},children:e.jsxs("div",{className:"flex",children:[e.jsx("img",{src:i.profilePic||E,alt:"",className:"w-6 h-6 rounded-full object-cover object-center"}),e.jsx("div",{className:"ml-2",children:i.username})]})}),e.jsx("div",{children:j.toLocaleString()})]},i.communityUserId)}):e.jsx("div",{}):e.jsx("div",{}):L?e.jsx("div",{children:"Loading members..."}):P?e.jsx("div",{children:"Error loading memberes"}):g?g.map(i=>{const j=new Date(i.createdAt);return e.jsxs("div",{className:"flex justify-between",children:[e.jsx(M,{to:"/u/$username",params:{username:i.username.toString()},children:e.jsxs("div",{className:"flex",children:[e.jsx("img",{src:i.profilePic||E,alt:"",className:"w-6 h-6 rounded-full object-cover object-center"}),e.jsx("div",{className:"ml-2",children:i.username})]})}),e.jsx("div",{children:j.toLocaleString()})]},i.communityUserId)}):e.jsx("div",{}),u==="description"?e.jsxs("div",{children:[e.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#222222] p-6 rounded shadow-lg w-[90%] max-w-md  z-100",children:e.jsxs("form",{action:"",className:"flex flex-col",children:[e.jsx("div",{className:"text-2xl mb-5",children:"Description"}),e.jsx("textarea",{className:"bg-[#444444] p-3 mx-auto mb-5 w-full rounded-xl",value:w,onChange:i=>p(i.target.value)}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("div",{onClick:()=>{n("none"),p(s.description)},className:"mx-1 bg-[#444444] hover:bg-[#555555] px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:"Cancel"}),e.jsx("div",{onClick:()=>{k||z({communityId:s.communityId,description:w},{onSuccess:()=>{n("none")}})},className:"mx-1 bg-cyan-600 hover:bg-cyan-500 px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:k?"Saving...":"Save"})]})]})}),e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-90"})]}):u==="mature"?e.jsxs("div",{children:[e.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#222222] p-6 rounded shadow-lg w-[90%] max-w-md  z-100",children:e.jsxs("form",{className:"flex flex-col",children:[e.jsx("div",{className:"text-2xl mb-5",children:"Mature (18+)"}),e.jsx("div",{onClick:()=>v(!l),className:"",children:e.jsxs("div",{className:`inline-flex items-center justify-center gap-0 mb-2 ${l?"bg-cyan-500":"bg-[#666666]"} rounded-full shadow-[inset_-1px_0px_4.8px_rgba(0,0,0,0.5)]`,children:[e.jsx("div",{className:`h-[25px] w-[25px] rounded-full font-bold text-lg tracking-wide transition-all duration-300 ease-in-out ${l?"bg-transparent":"bg-white"}`,style:{fontFamily:"'Nunito Sans', sans-serif"}}),e.jsx("div",{className:`h-[25px] w-[25px] rounded-full font-bold text-lg tracking-wide transition-all duration-300 ease-in-out ${l?"bg-white":"bg-transparent"}`,style:{fontFamily:"'Nunito Sans', sans-serif"}})]})}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("div",{onClick:()=>{n("none"),v(s.mature)},className:"mx-1 bg-[#444444] hover:bg-[#555555] px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:"Cancel"}),e.jsx("div",{onClick:()=>{C||$({communityId:s.communityId,mature:l},{onSuccess:()=>{n("none")}})},className:"mx-1 bg-cyan-600 hover:bg-cyan-500 px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:C?"Saving...":"Save"})]})]})}),e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-90"})]}):u==="visibility"?e.jsxs("div",{className:"",children:[e.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#222222] p-6 rounded shadow-lg w-[90%] max-w-md  z-100",children:e.jsxs("form",{action:"",className:"flex flex-col",children:[e.jsx("div",{className:"text-2xl mb-5",children:"Visibility"}),e.jsxs("div",{onClick:()=>r("public"),className:`p-2 cursor-pointer ${c==="public"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Public"}),e.jsx("div",{className:"text-xs",children:"Anyone can view, post and comment"})]}),e.jsxs("div",{onClick:()=>r("restricted"),className:`p-2 cursor-pointer ${c==="restricted"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Restricted"}),e.jsx("div",{className:"text-xs",children:"Anyone can view, but only approved users can contribute"})]}),e.jsxs("div",{onClick:()=>r("private"),className:`p-2 cursor-pointer mb-5 ${c==="private"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Private"}),e.jsx("div",{className:"text-xs",children:"Only approved users can view and contribute"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("div",{onClick:()=>{n("none"),r(s.visibility)},className:"mx-1 bg-[#444444] hover:bg-[#555555] px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:"Cancel"}),e.jsx("div",{onClick:()=>{S||A({communityId:s.communityId,visibility:c},{onSuccess:()=>{n("none")}})},className:"mx-1 bg-cyan-600 hover:bg-cyan-500 px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:S?"Saving...":"Save"})]})]})}),e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-90"})]}):e.jsx("div",{})]}):e.jsx("div",{})})}export{H as component};
