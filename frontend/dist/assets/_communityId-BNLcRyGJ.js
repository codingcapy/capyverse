import{E as $,a as A,u as D,b as p,r,j as e,L as w,d as C,G as z,H as P,k as I}from"./index-CeAXlKxS.js";import{a as j}from"./index-Dve_zERT.js";function Q(){const{communityId:c}=$.useParams(),x=A(),{user:t}=D(),{data:n,isLoading:h,error:f}=p(z(c)),{data:b,isLoading:k,error:S}=p(P(c)),{data:s,isLoading:E,error:M}=p(I(c)),[l,N]=r.useState("mods"),[m,a]=r.useState("none"),[L,g]=r.useState(s?s.description:""),[u,d]=r.useState(s?s.visibility:"public"),[o,y]=r.useState(s?s.mature:!1);return r.useEffect(()=>{h||(f&&x({to:"/"}),t||x({to:"/"}),n&&t&&!n.some(i=>i.username===t.username)&&x({to:"/"}))},[t,n]),e.jsx("div",{className:"pt-[70px] mx-auto",children:E?e.jsx("div",{className:"p-5 lg:pl-[170px]",children:"Loading community..."}):M?e.jsx("div",{className:"p-5 lg:pl-[170px]",children:"Error loading community"}):s?e.jsxs("div",{className:"p-5 lg:px-0 lg:pl-[170px]",children:[e.jsx("div",{className:"text-3xl font-bold",children:"Settings"}),e.jsxs("div",{className:"my-5",children:[e.jsxs("div",{className:"flex justify-between max-w-[700px] w-[70vw] 2xl:max-w-[1000px] my-2",children:[e.jsx("div",{className:"",children:"Display name"}),e.jsx("div",{children:s.communityId})]}),e.jsxs("div",{className:"flex justify-between max-w-[700px] 2xl:max-w-[1000px]",children:[e.jsx("div",{className:"mr-10",children:"Description"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"line-clamp-1 mr-2",children:s.description}),e.jsx("div",{onClick:()=>a("description"),className:"rotate-270 hover:bg-[#666666] p-2 rounded-full cursor-pointer",children:e.jsx(j,{})})]})]}),e.jsxs("div",{className:"flex justify-between max-w-[700px] 2xl:max-w-[1000px]",children:[e.jsx("div",{className:"",children:"Community Type"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"capitalize mr-2",children:s.visibility}),e.jsx("div",{onClick:()=>a("visibility"),className:"rotate-270 hover:bg-[#666666] p-2 rounded-full cursor-pointer",children:e.jsx(j,{})})]})]}),e.jsxs("div",{className:"flex justify-between max-w-[700px] 2xl:max-w-[1000px]",children:[e.jsx("div",{className:"",children:"Mature (18+)"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"mr-2",children:s.mature?s.mature.toString():"Off"}),e.jsx("div",{onClick:()=>a("mature"),className:"rotate-270 hover:bg-[#666666] p-2 rounded-full cursor-pointer",children:e.jsx(j,{})})]})]})]}),e.jsx("div",{className:"text-3xl font-bold",children:"Mature (18+)"}),e.jsxs("div",{className:"my-5 flex",children:[e.jsx("div",{onClick:()=>N("mods"),className:`pr-2 cursor-pointer ${l==="mods"&&"underline font-bold"}`,children:"Moderators"}),e.jsx("div",{onClick:()=>N("members"),className:`px-2 cursor-pointer ${l==="members"&&"underline font-bold"}`,children:"Members"})]}),e.jsxs("div",{className:"flex justify-between font-bold border-y border-[#555555] py-2 mb-5",children:[e.jsx("div",{children:"USERNAME"}),e.jsx("div",{children:"JOINED"})]}),l==="mods"?h?e.jsx("div",{children:"Loading moderators..."}):f?e.jsx("div",{children:"Error loading moderators"}):n?l==="mods"?n.map(i=>{const v=new Date(i.createdAt);return e.jsxs("div",{className:"flex justify-between",children:[e.jsx(w,{to:"/u/$username",params:{username:i.username.toString()},children:e.jsxs("div",{className:"flex",children:[e.jsx("img",{src:i.profilePic||C,alt:"",className:"w-6 h-6 rounded-full object-cover object-center"}),e.jsx("div",{className:"ml-2",children:i.username})]})}),e.jsx("div",{children:v.toLocaleString()})]},i.communityUserId)}):e.jsx("div",{}):e.jsx("div",{}):k?e.jsx("div",{children:"Loading members..."}):S?e.jsx("div",{children:"Error loading memberes"}):b?b.map(i=>{const v=new Date(i.createdAt);return e.jsxs("div",{className:"flex justify-between",children:[e.jsx(w,{to:"/u/$username",params:{username:i.username.toString()},children:e.jsxs("div",{className:"flex",children:[e.jsx("img",{src:i.profilePic||C,alt:"",className:"w-6 h-6 rounded-full object-cover object-center"}),e.jsx("div",{className:"ml-2",children:i.username})]})}),e.jsx("div",{children:v.toLocaleString()})]},i.communityUserId)}):e.jsx("div",{}),m==="description"?e.jsxs("div",{children:[e.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#222222] p-6 rounded shadow-lg w-[90%] max-w-md  z-100",children:e.jsxs("form",{action:"",className:"flex flex-col",children:[e.jsx("div",{className:"text-2xl mb-5",children:"Description"}),e.jsx("textarea",{className:"bg-[#444444] p-3 mx-auto mb-5 w-full rounded-xl",value:L,onChange:i=>g(i.target.value)}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("div",{onClick:()=>{a("none"),g(s.description)},className:"mx-1 bg-[#444444] hover:bg-[#555555] px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:"Cancel"}),e.jsx("div",{className:"mx-1 bg-cyan-600 hover:bg-cyan-500 px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:"Save"})]})]})}),e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-90"})]}):m==="mature"?e.jsxs("div",{children:[e.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#222222] p-6 rounded shadow-lg w-[90%] max-w-md  z-100",children:e.jsxs("form",{action:"",className:"flex flex-col",children:[e.jsx("div",{className:"text-2xl mb-5",children:"Mature (18+)"}),e.jsx("div",{onClick:()=>y(!o),className:"",children:e.jsxs("div",{className:`inline-flex items-center justify-center gap-0 mb-2 ${o?"bg-cyan-500":"bg-[#666666]"} rounded-full shadow-[inset_-1px_0px_4.8px_rgba(0,0,0,0.5)]`,children:[e.jsx("div",{className:`h-[25px] w-[25px] rounded-full font-bold text-lg tracking-wide transition-all duration-300 ease-in-out ${o?"bg-transparent":"bg-white"}`,style:{fontFamily:"'Nunito Sans', sans-serif"}}),e.jsx("div",{className:`h-[25px] w-[25px] rounded-full font-bold text-lg tracking-wide transition-all duration-300 ease-in-out ${o?"bg-white":"bg-transparent"}`,style:{fontFamily:"'Nunito Sans', sans-serif"}})]})}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("div",{onClick:()=>{a("none"),y(s.mature)},className:"mx-1 bg-[#444444] hover:bg-[#555555] px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:"Cancel"}),e.jsx("div",{className:"mx-1 bg-cyan-600 hover:bg-cyan-500 px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:"Save"})]})]})}),e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-90"})]}):m==="visibility"?e.jsxs("div",{className:"",children:[e.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#222222] p-6 rounded shadow-lg w-[90%] max-w-md  z-100",children:e.jsxs("form",{action:"",className:"flex flex-col",children:[e.jsx("div",{className:"text-2xl mb-5",children:"Visibility"}),e.jsxs("div",{onClick:()=>d("public"),className:`p-2 cursor-pointer ${u==="public"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Public"}),e.jsx("div",{className:"text-xs",children:"Anyone can view, post and comment"})]}),e.jsxs("div",{onClick:()=>d("restricted"),className:`p-2 cursor-pointer ${u==="restricted"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Restricted"}),e.jsx("div",{className:"text-xs",children:"Anyone can view, but only approved users can contribute"})]}),e.jsxs("div",{onClick:()=>d("private"),className:`p-2 cursor-pointer mb-5 ${u==="private"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Private"}),e.jsx("div",{className:"text-xs",children:"Only approved users can view and contribute"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("div",{onClick:()=>{a("none"),d(s.visibility)},className:"mx-1 bg-[#444444] hover:bg-[#555555] px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:"Cancel"}),e.jsx("div",{className:"mx-1 bg-cyan-600 hover:bg-cyan-500 px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:"Save"})]})]})}),e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-90"})]}):e.jsx("div",{})]}):e.jsx("div",{})})}export{Q as component};
