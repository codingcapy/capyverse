import{r as n,a as D,u as S,h as P,j as e}from"./index-BkgZ5UPI.js";import{P as I}from"./PostContentInput-Dd_lRu7T.js";import"./index-DICEMsxv.js";function E(){const[h,i]=n.useState(!1),v=n.useRef(null),[m,b]=n.useState(""),[j,$]=n.useState(""),p=D(),{user:a}=S(),[c,y]=n.useState(""),{mutate:N,isPending:x}=P(),[r,f]=n.useState(!1),[l,d]=n.useState("public"),[u,C]=n.useState("");function w(t){t.preventDefault(),!x&&N({communityId:c,description:m,userId:a&&a.userId||"",mature:r,visibility:l,icon:u},{onSuccess:()=>p({to:`/c/${c}`})})}function g(t){const s=t.target.files?.[0];if(!s)return;if(s.size>1024*1024){alert("File size exceeds 1MB. Please upload a smaller file.");return}const o=new FileReader;console.log(o),o.onloadend=()=>{C(o.result)},o.readAsDataURL(s)}return n.useEffect(()=>{a||p({to:"/login"})},[a]),e.jsxs("div",{className:"pt-20 w-[80%] lg:w-[50%] 2xl:w-[30%] mx-auto",children:[e.jsx("div",{className:"text-center font-bold text-cyan-500 text-2xl mb-5",children:"Create Community"}),e.jsxs("form",{onSubmit:w,className:"flex flex-col mx-auto ",children:[e.jsxs("div",{className:"p-2 border border-[#c4c4c4] rounded-xl my-2 flex",children:[e.jsx("div",{className:"text-[#919191]",children:"c/"}),e.jsx("input",{type:"text",name:"titleinput",id:"title",required:!0,value:c,onChange:t=>{const s=t.target.value.replace(/\s+/g,"");y(s)},className:"w-full outline-none",placeholder:"Community name "})]}),u!==""?e.jsx("div",{className:"my-5",children:e.jsx("img",{src:u})}):e.jsxs("div",{onDragEnter:t=>{t.preventDefault(),i(!0)},onDragOver:t=>{t.preventDefault(),i(!0)},onDragLeave:()=>i(!1),onDrop:t=>{t.preventDefault(),i(!1)},className:`my-5 border border-dashed w-full h-[150px] rounded-xl ${h?"bg-[#242424]":""}`,children:[e.jsx("input",{ref:v,type:"file",className:"hidden",accept:"image/png, image/jpeg, image/heic, image/webp",onChange:g}),e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{className:"text-center pt-[60px]",children:"Drag and drop or upload community icon"}),e.jsx("input",{type:"file",className:"absolute top-0 left-0 w-full h-full py-2 opacity-0 cursor-pointer appearance-none file:hidden",accept:"image/png, image/jpeg, image/heic, image/webp",onChange:g})]})]}),e.jsx(I,{content:m,onChange:t=>b(t),contentPlaceholder:"Description"}),e.jsxs("div",{className:"my-2",children:[e.jsx("div",{className:"text-xl mb-2 font-semibold",children:"Visibility"}),e.jsxs("div",{onClick:()=>d("public"),className:`p-2 cursor-pointer ${l==="public"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Public"}),e.jsx("div",{className:"text-sm",children:"Anyone can view, post and comment to this community"})]}),e.jsxs("div",{onClick:()=>d("restricted"),className:`p-2 cursor-pointer ${l==="restricted"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Restricted"}),e.jsx("div",{className:"text-sm",children:"Anyone can view, but only approved users can contribute"})]}),e.jsxs("div",{onClick:()=>d("private"),className:`p-2 cursor-pointer ${l==="private"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Private"}),e.jsx("div",{className:"text-sm",children:"Only approved users can view and contribute"})]})]}),e.jsxs("div",{className:"my-3",children:[e.jsx("div",{children:"Mature (18+)"}),e.jsx("div",{className:"text-sm",children:"Users must be over 18 to view and contribute"}),e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:`inline-flex items-center justify-center gap-0 mb-2 ${r?"bg-cyan-500":"bg-[#666666]"} rounded-full shadow-[inset_-1px_0px_4.8px_rgba(0,0,0,0.5)]`,children:[e.jsx("div",{className:`h-[25px] w-[25px] rounded-full font-bold text-lg tracking-wide transition-all duration-300 ease-in-out ${r?"bg-transparent":"bg-white"}`,style:{fontFamily:"'Nunito Sans', sans-serif"},onClick:()=>f(!1)}),e.jsx("div",{className:`h-[25px] w-[25px] rounded-full font-bold text-lg tracking-wide transition-all duration-300 ease-in-out ${r?"bg-white":"bg-transparent"}`,style:{fontFamily:"'Nunito Sans', sans-serif"},onClick:()=>f(!0)})]})})]}),e.jsx("button",{className:"bg-cyan-600 px-5 py-2 rounded-full font-bold my-5 cursor-pointer hover:bg-cyan-500 transition-all ease-in-out duration-300",children:x?"Creating...":"Create Community"})]}),e.jsx("div",{children:j})]})}export{E as component};
