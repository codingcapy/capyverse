import{r as p,f as y,u as I,j as e,L as P,I as w}from"./index-7giRpdmR.js";import{u as i,d as L,F as E}from"./images-Bfst5pqA.js";import{c as D,d as r,a as C,V as M,M as k}from"./Menu-CvZjaRdn.js";import{g as A}from"./users-D0DYbT8Z.js";function B(s){const[l,n]=p.useState(!1),[c,a]=p.useState(!1),{mutate:h,isPending:m}=y(),{user:o}=I(),{data:d,isLoading:f}=i(A(s.post.userId)),{data:x,isLoading:j,error:g}=i(D(s.post.postId)),{data:u,isLoading:v,error:b}=i(L(s.post.postId));return e.jsxs("div",{className:"mx-auto w-full md:w-[50%] 2xl:w-[750px] border-t border-[#636363]",children:[e.jsxs(P,{to:"/posts/$postId",params:{postId:s.post.postId.toString()},children:[e.jsxs("div",{className:"relative my-1 rounded py-2 px-4 hover:bg-[#333333] transition-all ease-in-out duration-300",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex text-[#bdbdbd] text-sm",children:[e.jsx("img",{src:f?r:d?d.profilePic?d.profilePic:r:r,alt:"",className:"w-6 h-6 rounded-full"}),e.jsx("div",{className:"font-bold ml-2",children:s.post.username}),e.jsx("div",{className:"px-1",children:"•"}),e.jsx("div",{children:C(s.post.createdAt)})]}),e.jsx("div",{onClick:t=>{t.stopPropagation(),t.preventDefault(),n(!l)},className:"absolute top-1 right-1 p-3 rounded-full hover:bg-[#575757] transition-all ease-in-out duration-300",children:e.jsx(E,{})})]}),e.jsx("div",{className:"text-xl md:text-2xl font-semibold",children:s.post.title}),v?e.jsx("div",{children:"Loading..."}):b?e.jsx("div",{children:"Error loading images"}):u?u.map((t,N)=>{if(N<1)return e.jsx("div",{className:"w-full h-[220px] sm:h-[300px] md:h-[400px] xl:h-[500px] border border-[#424242] bg-[#202020] rounded-xl my-2 flex items-center justify-center",children:e.jsx("img",{src:`https://${t.imageUrl}`,alt:"",className:"w-full h-full object-contain"})},t.imageId)}):e.jsx("div",{children:"An unexpected error has occured"}),e.jsx("div",{className:"my-2",children:s.post.content}),e.jsxs("div",{className:"flex",children:[e.jsx(M,{post:s.post}),e.jsxs("div",{className:"flex bg-[#3e3e3e] w-fit rounded-full py-1 justify-center ml-2 hover:text-cyan-500 transition-all ease-in-out duration-300",children:[e.jsx("div",{className:"pl-3 pr-1",children:e.jsx(w,{size:20})}),j?e.jsx("div",{className:"pr-3",children:"Loading..."}):g?e.jsx("div",{className:"pr-3",children:"Error fetching comments"}):x?e.jsx("div",{className:"pr-3 font-semibold",children:x.length}):e.jsx("div",{className:"pr-3",children:"An unexpected error has occured"})]})]}),l&&e.jsx(k,{post:s.post,setDeleteMode:a,setShowMenu:n})]}),o&&s.post.userId===o.userId&&c&&e.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#222222] p-6 rounded shadow-lg w-[90%] max-w-md text-center z-100",children:[e.jsx("div",{className:"text-2xl font-bold",children:"Delete Post?"}),e.jsx("div",{className:"my-5",children:"Once you delete this post, it can’t be restored."}),e.jsxs("div",{className:"my-5 flex justify-end",children:[e.jsx("div",{onClick:t=>{t.stopPropagation(),t.preventDefault(),!m&&(h({postId:s.post.postId}),a(!1))},className:"p-2 mr-1 bg-red-500 rounded text-white bold secondary-font font-bold cursor-pointer",children:m?"Deleting...":"DELETE"}),e.jsx("div",{onClick:t=>{t.stopPropagation(),t.preventDefault(),a(!1)},className:"p-2 ml-1 bg-[#5c5c5c] rounded bold secondary-font font-bold cursor-pointer",children:"CANCEL"})]})]})]},s.post.postId),o&&s.post.userId===o.userId&&c&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-90"})]})}export{B as P};
