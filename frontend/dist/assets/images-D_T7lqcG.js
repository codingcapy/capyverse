import{Y as r,T as s,U as i,X as l,V as u,W as c}from"./index-BiB4DHLD.js";function v(t){return r({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"},child:[]}]})(t)}function A(t){return r({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"},child:[]}]})(t)}function B(t){return r({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"},child:[]}]})(t)}function I(t){return r({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M229.66,141.66l-96,96a8,8,0,0,1-11.32,0l-96-96A8,8,0,0,1,32,128H72V48A16,16,0,0,1,88,32h80a16,16,0,0,1,16,16v80h40a8,8,0,0,1,5.66,13.66Z"},child:[]}]})(t)}function C(t){return r({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M231.39,123.06A8,8,0,0,1,224,128H184v80a16,16,0,0,1-16,16H88a16,16,0,0,1-16-16V128H32a8,8,0,0,1-5.66-13.66l96-96a8,8,0,0,1,11.32,0l96,96A8,8,0,0,1,231.39,123.06Z"},child:[]}]})(t)}function q(t){return r({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M231.39,132.94A8,8,0,0,0,224,128H184V48a16,16,0,0,0-16-16H88A16,16,0,0,0,72,48v80H32a8,8,0,0,0-5.66,13.66l96,96a8,8,0,0,0,11.32,0l96-96A8,8,0,0,0,231.39,132.94ZM128,220.69,51.31,144H80a8,8,0,0,0,8-8V48h80v88a8,8,0,0,0,8,8h28.69Z"},child:[]}]})(t)}function F(t){return r({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M229.66,114.34l-96-96a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,32,128H72v80a16,16,0,0,0,16,16h80a16,16,0,0,0,16-16V128h40a8,8,0,0,0,5.66-13.66ZM176,112a8,8,0,0,0-8,8v88H88V120a8,8,0,0,0-8-8H51.31L128,35.31,204.69,112Z"},child:[]}]})(t)}function M(t){return r({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"},child:[]}]})(t)}function d(t){return{...t,createdAt:new Date(t.createdAt)}}function H(){const t=l(),a=u();return c({mutationFn:async({userId:e,file:o,postId:g})=>{new FormData().append("file",o);const n=await(await i.api.v0.images.upload.$post({form:{userId:e,file:o,postId:g}},t?{headers:{Authorization:`Bearer ${t}`}}:void 0)).json();if(!n.success)throw new Error(n.error);return{cloudFrontUrl:n.cloudFrontUrl,userId:e}},onSettled:e=>{if(!e)return console.log(e,"create args, returning");a.invalidateQueries({queryKey:["images",e.userId]}),a.invalidateQueries({queryKey:["images"]})}})}async function h(t){const a=await i.api.v0.images[":postId"].$get({param:{postId:t.toString()}});if(!a.ok)throw new Error("Error getting images by request");const{images:e}=await a.json();return e.map(d)}const P=t=>s({queryKey:["images",t],queryFn:()=>h(t)});async function m(t){const a=await i.api.v0.images.user[":userId"].$get({param:{userId:t.toString()}});if(!a.ok)throw new Error("Error getting images by request");const{images:e}=await a.json();return e.map(d)}const Z=t=>s({queryKey:["images",t],queryFn:()=>m(t)});async function w(t){const a=l(),e=await i.api.v0.images.delete.$post({json:t},a?{headers:{Authorization:`Bearer ${a}`}}:void 0);if(!e.ok)throw new Error("Error deleting image.");const{newImage:o}=await e.json();return console.log(o),o}const x=()=>{const t=u();return c({mutationFn:w,onSettled:a=>{a&&(t.invalidateQueries({queryKey:["images",a.postId]}),t.invalidateQueries({queryKey:["images"]}))}})};export{M as P,x as a,v as b,P as c,A as d,B as e,C as f,Z as g,F as h,I as i,q as j,H as u};
