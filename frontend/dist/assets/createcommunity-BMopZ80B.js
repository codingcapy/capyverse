import{r as s,a as D,u as S,h as $,j as e}from"./index-2wrbeErJ.js";function R(){const[g,a]=s.useState(!1),h=s.useRef(null),[u,v]=s.useState(""),[b,k]=s.useState(""),m=D(),{user:p}=S(),[o,j]=s.useState(""),{mutate:y,isPending:x}=$(),[n,N]=s.useState(!1),[r,c]=s.useState("public"),[d,C]=s.useState("");function w(t){t.preventDefault(),!x&&y({communityId:o,description:u,mature:n,visibility:r,icon:d},{onSuccess:()=>m({to:`/c/${o}`})})}function f(t){const i=t.target.files?.[0];if(!i)return;if(i.size>1024*1024){alert("File size exceeds 1MB. Please upload a smaller file.");return}const l=new FileReader;console.log(l),l.onloadend=()=>{C(l.result)},l.readAsDataURL(i)}return s.useEffect(()=>{p||m({to:"/login"})},[p]),e.jsxs("div",{className:"pt-20 w-[80%] lg:w-[50%] 2xl:w-[30%] mx-auto",children:[e.jsx("div",{className:"text-center font-bold text-cyan-500 text-2xl mb-5",children:"Create Community"}),e.jsxs("form",{onSubmit:w,className:"flex flex-col mx-auto ",children:[e.jsxs("div",{className:"p-2 border border-[#c4c4c4] rounded-xl my-2 flex",children:[e.jsx("div",{className:"text-[#919191]",children:"c/"}),e.jsx("input",{type:"text",name:"titleinput",id:"title",required:!0,value:o,onChange:t=>{const i=t.target.value.replace(/\s+/g,"");j(i)},className:"w-full outline-none",placeholder:"Community name "})]}),d!==""?e.jsx("div",{className:"my-5",children:e.jsx("img",{src:d})}):e.jsxs("div",{onDragEnter:t=>{t.preventDefault(),a(!0)},onDragOver:t=>{t.preventDefault(),a(!0)},onDragLeave:()=>a(!1),onDrop:t=>{t.preventDefault(),a(!1)},className:`my-5 border border-dashed w-full h-[150px] rounded-xl ${g?"bg-[#242424]":""}`,children:[e.jsx("input",{ref:h,type:"file",className:"hidden",accept:"image/png, image/jpeg, image/heic, image/webp",onChange:f}),e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{className:"text-center pt-[60px]",children:"Drag and drop or upload community icon"}),e.jsx("input",{type:"file",className:"absolute top-0 left-0 w-full h-full py-2 opacity-0 cursor-pointer appearance-none file:hidden",accept:"image/png, image/jpeg, image/heic, image/webp",onChange:f})]})]}),e.jsx("textarea",{className:"border border-[#c4c4c4] rounded-xl my-2 p-2 h-[200px]",content:u,onChange:t=>v(t.target.value),placeholder:"Description"}),e.jsxs("div",{className:"my-2",children:[e.jsx("div",{className:"text-xl mb-2 font-semibold",children:"Visibility"}),e.jsxs("div",{onClick:()=>c("public"),className:`p-2 cursor-pointer ${r==="public"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Public"}),e.jsx("div",{className:"text-sm",children:"Anyone can view, post and comment to this community"})]}),e.jsxs("div",{onClick:()=>c("restricted"),className:`p-2 cursor-pointer ${r==="restricted"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Restricted"}),e.jsx("div",{className:"text-sm",children:"Anyone can view, but only approved users can contribute"})]}),e.jsxs("div",{onClick:()=>c("private"),className:`p-2 cursor-pointer ${r==="private"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Private"}),e.jsx("div",{className:"text-sm",children:"Only approved users can view and contribute"})]})]}),e.jsxs("div",{className:"my-3",children:[e.jsx("div",{children:"Mature (18+)"}),e.jsx("div",{className:"text-sm",children:"Users must be over 18 to view and contribute"}),e.jsx("div",{onClick:()=>N(!n),className:"mt-2",children:e.jsxs("div",{className:`inline-flex items-center justify-center gap-0 mb-2 ${n?"bg-cyan-500":"bg-[#666666]"} rounded-full shadow-[inset_-1px_0px_4.8px_rgba(0,0,0,0.5)]`,children:[e.jsx("div",{className:`h-[25px] w-[25px] rounded-full font-bold text-lg tracking-wide transition-all duration-300 ease-in-out ${n?"bg-transparent":"bg-white"}`,style:{fontFamily:"'Nunito Sans', sans-serif"}}),e.jsx("div",{className:`h-[25px] w-[25px] rounded-full font-bold text-lg tracking-wide transition-all duration-300 ease-in-out ${n?"bg-white":"bg-transparent"}`,style:{fontFamily:"'Nunito Sans', sans-serif"}})]})})]}),e.jsx("button",{className:"bg-cyan-600 px-5 py-2 rounded-full font-bold my-5 cursor-pointer hover:bg-cyan-500 transition-all ease-in-out duration-300",children:x?"Creating...":"Create Community"})]}),e.jsx("div",{children:b})]})}export{R as component};
