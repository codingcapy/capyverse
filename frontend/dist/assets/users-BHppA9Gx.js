import{y as a,z as i,v as u,x as o}from"./index-kYo_-3ll.js";async function c(r){const e=await o.api.v0.users.$post({json:r});if(!e.ok){let n="There was an issue creating your account :( We'll look into it ASAP!";try{const t=await e.json();t&&typeof t=="object"&&"message"in t&&(n=String(t.message))}catch(t){console.error("Failed to parse error response:",t)}throw new Error(n)}const s=await e.json();if(!s.user)throw new Error("Invalid response from server");return s.user}const w=r=>{const e=a();return i({mutationFn:c,onSettled:()=>{e.invalidateQueries({queryKey:["users"]})},onError:s=>{}})};async function y(r){const e=await o.api.v0.users[":userId"].$get({param:{userId:r}});if(!e.ok)throw new Error("Error getting user by id");const{userQuery:s}=await e.json();return s}const d=r=>u({queryKey:["users",r],queryFn:()=>y(r)});async function l(r){const e=await o.api.v0.users.update.profilepic.$post({json:r});if(!e.ok)throw new Error("Error updating user.");const{newUser:s}=await e.json();return console.log(s),s}const f=()=>{const r=a();return i({mutationFn:l,onSettled:e=>{e&&(r.invalidateQueries({queryKey:["users",e.userId]}),r.invalidateQueries({queryKey:["users"]}))}})};export{f as a,d as g,w as u};
