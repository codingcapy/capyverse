import{S as a,T as i,O as u,P as o}from"./index-SuU0Gqb8.js";async function c(e){const r=await o.api.v0.users.$post({json:e});if(!r.ok){let n="There was an issue creating your account :( We'll look into it ASAP!";try{const t=await r.json();t&&typeof t=="object"&&"message"in t&&(n=String(t.message))}catch(t){console.error("Failed to parse error response:",t)}throw new Error(n)}const s=await r.json();if(!s.user)throw new Error("Invalid response from server");return s.user}const g=e=>{const r=a();return i({mutationFn:c,onSettled:()=>{r.invalidateQueries({queryKey:["users"]})},onError:s=>{}})};async function y(e){const r=await o.api.v0.users[":userId"].$get({param:{userId:e}});if(!r.ok)throw new Error("Error getting user by id");const{userQuery:s}=await r.json();return s}const f=e=>u({queryKey:["user",e],queryFn:()=>y(e)});async function p(e){const r=await o.api.v0.users.user[":username"].$get({param:{username:e}});if(!r.ok)throw new Error("Error getting user by id");const{userQuery:s}=await r.json();return s}const d=e=>u({queryKey:["user",e],queryFn:()=>p(e)});async function l(e){const r=await o.api.v0.users.update.profilepic.$post({json:e});if(!r.ok)throw new Error("Error updating user.");const{newUser:s}=await r.json();return console.log(s),s}const m=()=>{const e=a();return i({mutationFn:l,onSettled:r=>{r&&(e.invalidateQueries({queryKey:["users",r.userId]}),e.invalidateQueries({queryKey:["users"]}))}})};export{m as a,d as b,f as g,g as u};
