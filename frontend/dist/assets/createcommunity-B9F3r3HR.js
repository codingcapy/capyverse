import{r as a,a as I,u as O,h as P,j as e}from"./index-Qc9sotK4.js";import{F as y}from"./index-BiE7PRQH.js";function U(){const[N,r]=a.useState(!1),[C,l]=a.useState(!1),w=a.useRef(null),D=a.useRef(null),[p,S]=a.useState(""),[z,A]=a.useState(""),x=I(),{user:g}=O(),[c,R]=a.useState(""),{mutate:$,isPending:f}=P(),[i,k]=a.useState(!1),[o,d]=a.useState("public"),[u,h]=a.useState(""),[m,v]=a.useState("");function F(t){t.preventDefault(),!f&&$({communityId:c,description:p,mature:i,visibility:o,icon:u,banner:m},{onSuccess:()=>x({to:`/c/${c}`})})}function b(t){const s=t.target.files?.[0];if(!s)return;if(s.size>1024*1024){alert("File size exceeds 1MB. Please upload a smaller file.");return}const n=new FileReader;console.log(n),n.onloadend=()=>{h(n.result)},n.readAsDataURL(s)}function j(t){const s=t.target.files?.[0];if(!s)return;if(s.size>2*1024*1024){alert("File size exceeds 2MB. Please upload a smaller file.");return}const n=new FileReader;console.log(n),n.onloadend=()=>{v(n.result)},n.readAsDataURL(s)}return a.useEffect(()=>{g||x({to:"/login"})},[g]),e.jsxs("div",{className:"pt-20 w-[80%] lg:w-[50%] 2xl:w-[30%] mx-auto",children:[e.jsx("div",{className:"text-center font-bold text-cyan-500 text-2xl mb-5",children:"Create Community"}),e.jsxs("form",{onSubmit:F,className:"flex flex-col mx-auto ",children:[e.jsxs("div",{className:"p-2 border border-[#c4c4c4] rounded-xl my-2 flex",children:[e.jsx("div",{className:"text-[#919191]",children:"c/"}),e.jsx("input",{type:"text",name:"titleinput",id:"title",required:!0,value:c,onChange:t=>{const s=t.target.value.replace(/\s+/g,"");R(s)},className:"w-full outline-none",placeholder:"Community name "})]}),u!==""?e.jsxs("div",{className:"my-5 relative",children:[e.jsx(y,{size:20,className:"text-red-400 absolute top-2 right-2 bg-zinc-700 p-[4px] rounded z-10 cursor-pointer",onClick:()=>h("")}),e.jsx("img",{src:u,className:"rounded-full w-[100px] h-[100px] object-cover object-center"})]}):e.jsxs("div",{onDragEnter:t=>{t.preventDefault(),r(!0)},onDragOver:t=>{t.preventDefault(),r(!0)},onDragLeave:()=>r(!1),onDrop:t=>{t.preventDefault(),r(!1)},className:`my-5 border border-dashed w-full h-[125px] rounded-xl ${N?"bg-[#242424]":""}`,children:[e.jsx("input",{ref:w,type:"file",className:"hidden",accept:"image/png, image/jpeg, image/heic, image/webp",onChange:b}),e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{className:"text-center pt-[50px]",children:"Drag and drop or upload community icon"}),e.jsx("input",{type:"file",className:"absolute top-0 left-0 w-full h-full py-2 opacity-0 cursor-pointer appearance-none file:hidden",accept:"image/png, image/jpeg, image/heic, image/webp",onChange:b})]})]}),m!==""?e.jsxs("div",{className:"my-5 relative",children:[e.jsx(y,{size:20,className:"text-red-400 absolute top-2 right-2 bg-zinc-700 p-[4px] rounded z-10 cursor-pointer",onClick:()=>v("")}),e.jsx("img",{src:m,className:"object-cover object-center"})]}):e.jsxs("div",{onDragEnter:t=>{t.preventDefault(),l(!0)},onDragOver:t=>{t.preventDefault(),l(!0)},onDragLeave:()=>l(!1),onDrop:t=>{t.preventDefault(),l(!1)},className:`mb-5 border border-dashed w-full h-[125px] rounded-xl ${C?"bg-[#242424]":""}`,children:[e.jsx("input",{ref:D,type:"file",className:"hidden",accept:"image/png, image/jpeg, image/heic, image/webp",onChange:j}),e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{className:"text-center pt-[50px]",children:"Drag and drop or upload community banner"}),e.jsx("input",{type:"file",className:"absolute top-0 left-0 w-full h-full py-2 opacity-0 cursor-pointer appearance-none file:hidden",accept:"image/png, image/jpeg, image/heic, image/webp",onChange:j})]})]}),e.jsx("textarea",{className:"border border-[#c4c4c4] rounded-xl my-2 p-2 h-[200px]",content:p,onChange:t=>S(t.target.value),placeholder:"Description"}),e.jsxs("div",{className:"my-2",children:[e.jsx("div",{className:"text-xl mb-2 font-semibold",children:"Visibility"}),e.jsxs("div",{onClick:()=>d("public"),className:`p-2 cursor-pointer ${o==="public"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Public"}),e.jsx("div",{className:"text-sm",children:"Anyone can view, post and comment to this community"})]}),e.jsxs("div",{onClick:()=>d("restricted"),className:`p-2 cursor-pointer ${o==="restricted"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Restricted"}),e.jsx("div",{className:"text-sm",children:"Anyone can view, but only approved users can contribute"})]}),e.jsxs("div",{onClick:()=>d("private"),className:`p-2 cursor-pointer ${o==="private"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Private"}),e.jsx("div",{className:"text-sm",children:"Only approved users can view and contribute"})]})]}),e.jsxs("div",{className:"my-3",children:[e.jsx("div",{children:"Mature (18+)"}),e.jsx("div",{className:"text-sm",children:"Users must be over 18 to view and contribute"}),e.jsx("div",{onClick:()=>k(!i),className:"mt-2",children:e.jsxs("div",{className:`inline-flex items-center justify-center gap-0 mb-2 ${i?"bg-cyan-500":"bg-[#666666]"} rounded-full shadow-[inset_-1px_0px_4.8px_rgba(0,0,0,0.5)]`,children:[e.jsx("div",{className:`h-[25px] w-[25px] rounded-full font-bold text-lg tracking-wide transition-all duration-300 ease-in-out ${i?"bg-transparent":"bg-white"}`,style:{fontFamily:"'Nunito Sans', sans-serif"}}),e.jsx("div",{className:`h-[25px] w-[25px] rounded-full font-bold text-lg tracking-wide transition-all duration-300 ease-in-out ${i?"bg-white":"bg-transparent"}`,style:{fontFamily:"'Nunito Sans', sans-serif"}})]})})]}),e.jsx("button",{className:"bg-cyan-600 px-5 py-2 rounded-full font-bold my-5 cursor-pointer hover:bg-cyan-500 transition-all ease-in-out duration-300",children:f?"Creating...":"Create Community"})]}),e.jsx("div",{children:z})]})}export{U as component};
