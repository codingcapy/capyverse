import{u as g,a as x,c as f,r as h,b as y,d as b,j as e,L as j}from"./index-BLcJs1nw.js";async function v(n){const o=await f.api.v0.users.$post({json:n});if(!o.ok){let a="There was an issue creating your account :( We'll look into it ASAP!";try{const t=await o.json();t&&typeof t=="object"&&"message"in t&&(a=String(t.message))}catch(t){console.error("Failed to parse error response:",t)}throw new Error(a)}const r=await o.json();if(!r.user)throw new Error("Invalid response from server");return r.user}const w=n=>{const o=g();return x({mutationFn:v,onSettled:()=>{o.invalidateQueries({queryKey:["users"]})},onError:r=>{}})};function N(){const{mutate:n}=w(),[o,r]=h.useState(""),{loginService:a,authLoading:t,user:l}=y(s=>s),d=b();l&&d({to:"/"});function m(s){s.preventDefault();const u=s.target.username.value,i=s.target.email.value,c=s.target.password.value;if(u.length>255)return r("Username too long!");if(i.length>255)return r("Email too long!");if(c.length>80)return r("Password too long! Max character limit is 80");n({username:u,password:c,email:i},{onSuccess:()=>{a(i,c),t&&r("Loading...")},onError:p=>r(p.toString())})}return e.jsxs("div",{className:"pt-20 w-[300px] mx-auto",children:[e.jsx("div",{className:"text-center font-bold text-cyan-500 text-2xl mb-10",children:"Sign Up"}),e.jsxs("form",{onSubmit:m,className:"flex flex-col mx-auto",children:[e.jsx("input",{type:"text",name:"username",id:"username",required:!0,className:"p-2 border border-[#c4c4c4] rounded bg-[#414141] my-2",placeholder:"username"}),e.jsx("input",{type:"email",name:"email",id:"email",required:!0,className:"p-2 border border-[#c4c4c4] rounded bg-[#414141] my-2",placeholder:"email"}),e.jsx("input",{type:"password",name:"password",id:"password",required:!0,className:"p-2 border border-[#c4c4c4] rounded bg-[#414141] my-2",placeholder:"password"}),e.jsx("button",{className:"bg-cyan-500 px-5 py-2 rounded-full font-bold my-5",children:"SIGN UP"})]}),e.jsxs("div",{children:["Already have an account?"," ",e.jsx(j,{to:"/login",className:"text-cyan-500 font-bold",children:"Login"})]}),e.jsx("div",{children:o})]})}export{N as component};
