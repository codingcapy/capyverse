import{q as a,e as n,c as i,d as u}from"./index-CqFi3jTp.js";async function c(e){const r=await n.api.v0.users.$post({json:e});if(!r.ok){let t="There was an issue creating your account :( We'll look into it ASAP!";try{const s=await r.json();s&&typeof s=="object"&&"message"in s&&(t=String(s.message))}catch(s){console.error("Failed to parse error response:",s)}throw new Error(t)}const o=await r.json();if(!o.user)throw new Error("Invalid response from server");return o.user}const p=e=>{const r=i();return u({mutationFn:c,onSettled:()=>{r.invalidateQueries({queryKey:["users"]})},onError:o=>{}})};async function y(e){const r=await n.api.v0.users[":userId"].$get({param:{userId:e}});if(!r.ok)throw new Error("Error getting user by id");const{userQuery:o}=await r.json();return o}const w=e=>a({queryKey:["users",e],queryFn:()=>y(e)});export{w as g,p as u};
