import{r as d,c,u as x,j as s,L as u,g as m}from"./index-DotJ7YjR.js";import{d as p,F as h,V as f,M as j,u as v,P as N}from"./Menu-BHRWaY-C.js";function b(e){const[l,n]=d.useState(!1),[i,o]=d.useState(!1),{mutate:r}=c(),{user:a}=x();return s.jsxs("div",{className:"mx-auto w-full lg:w-[50%] 2xl:w-[750px] border-t border-[#636363]",children:[s.jsxs(u,{to:"/posts/$postId",params:{postId:e.post.postId.toString()},children:[s.jsxs("div",{className:"relative my-1 rounded p-5 hover:bg-[#333333] transition-all ease-in-out duration-300",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("div",{className:"flex text-[#bdbdbd] text-sm",children:[s.jsx("div",{className:"font-bold",children:e.post.username}),s.jsx("div",{className:"px-1",children:"•"}),s.jsx("div",{children:p(e.post.createdAt)})]}),s.jsx("div",{onClick:t=>{t.stopPropagation(),t.preventDefault(),n(!l)},className:"absolute top-1 right-1 p-3 rounded-full hover:bg-[#575757] transition-all ease-in-out duration-300",children:s.jsx(h,{})})]}),s.jsx("div",{className:"text-2xl font-bold",children:e.post.title}),s.jsx("div",{className:"my-2",children:e.post.content}),s.jsx(f,{post:e.post}),l&&s.jsx(j,{post:e.post,setDeleteMode:o,setShowMenu:n})]}),a&&e.post.userId===a.userId&&i&&s.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#222222] p-6 rounded shadow-lg w-[90%] max-w-md text-center z-100",children:[s.jsx("div",{className:"text-2xl font-bold",children:"Delete Post?"}),s.jsx("div",{className:"my-5",children:"Once you delete this post, it can’t be restored."}),s.jsxs("div",{className:"my-5 flex justify-end",children:[s.jsx("div",{onClick:t=>{t.stopPropagation(),t.preventDefault(),r({postId:e.post.postId}),o(!1)},className:"p-2 mr-1 bg-red-500 rounded text-white bold secondary-font font-bold cursor-pointer",children:"DELETE"}),s.jsx("div",{onClick:t=>{t.stopPropagation(),t.preventDefault(),o(!1)},className:"p-2 ml-1 bg-[#5c5c5c] rounded bold secondary-font font-bold cursor-pointer",children:"CANCEL"})]})]})]},e.post.postId),a&&e.post.userId===a.userId&&i&&s.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-60"})]})}function y(){const{data:e,isPending:l,isError:n}=v(m()),[i,o]=d.useState(!1),[r,a]=d.useState("Popular");return s.jsx("div",{className:"flex-1 p-2",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"mx-auto w-full lg:w-[50%] pt-[70px] pb-5 ",children:s.jsxs("div",{className:"relative mx-auto w-full 2xl:w-[750px] flex",children:[s.jsxs("div",{onClick:()=>o(!0),className:"flex cursor-pointer",children:[s.jsx("div",{className:"text-xs",children:r}),s.jsx("div",{className:"ml-2",children:s.jsx(N,{})})]}),i&&s.jsxs("div",{onClick:()=>{},className:"absolute top-5 left-0 bg-[#444444] p-5 z-50",children:[s.jsx("div",{onClick:()=>{a("Popular"),o(!1)},className:"cursor-pointer hover:text-cyan-500 transition-all ease-in-out duration-300",children:"Popular"}),s.jsx("div",{onClick:()=>{a("New"),o(!1)},className:"cursor-pointer hover:text-cyan-500 transition-all ease-in-out duration-300",children:"New"})]})]})}),n?s.jsx("div",{className:"mx-auto w-full lg:w-[50%]",children:"Error fetching posts"}):l?s.jsx("div",{className:"mx-auto w-full lg:w-[50%]",children:"Loading..."}):e?.map(t=>s.jsx(b,{post:t},t.postId))]})})}export{y as component};
