import{E as A,a as D,u as I,b as v,r,G as z,j as e,L as C,d as k,H as O,J as Q,k as R}from"./index-BfR8brfs.js";import{a as j}from"./index-CG548KaV.js";function B(){const{communityId:c}=A.useParams(),m=D(),{user:l}=I(),{data:n,isLoading:h,error:f}=v(O(c)),{data:b,isLoading:M,error:S}=v(Q(c)),{data:s,isLoading:E,error:L}=v(R(c)),[d,N]=r.useState("mods"),[x,a]=r.useState("none"),[$,g]=r.useState(s?s.description:""),[u,o]=r.useState(s?s.visibility:"public"),[t,y]=r.useState(s?s.mature:!1),{mutate:P,isPending:w}=z();return r.useEffect(()=>{h||(f&&m({to:"/"}),l||m({to:"/"}),n&&l&&!n.some(i=>i.username===l.username)&&m({to:"/"}))},[l,n]),e.jsx("div",{className:"pt-[70px] mx-auto",children:E?e.jsx("div",{className:"p-5 lg:pl-[170px]",children:"Loading community..."}):L?e.jsx("div",{className:"p-5 lg:pl-[170px]",children:"Error loading community"}):s?e.jsxs("div",{className:"p-5 lg:px-0 lg:pl-[170px]",children:[e.jsx("div",{className:"text-3xl font-bold",children:"Settings"}),e.jsxs("div",{className:"my-5",children:[e.jsxs("div",{className:"flex justify-between max-w-[700px] w-[70vw] 2xl:max-w-[1000px] my-2",children:[e.jsx("div",{className:"",children:"Display name"}),e.jsx("div",{children:s.communityId})]}),e.jsxs("div",{className:"flex justify-between max-w-[700px] 2xl:max-w-[1000px]",children:[e.jsx("div",{className:"mr-10",children:"Description"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"line-clamp-1 mr-2",children:s.description}),e.jsx("div",{onClick:()=>a("description"),className:"rotate-270 hover:bg-[#666666] p-2 rounded-full cursor-pointer",children:e.jsx(j,{})})]})]}),e.jsxs("div",{className:"flex justify-between max-w-[700px] 2xl:max-w-[1000px]",children:[e.jsx("div",{className:"",children:"Community Type"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"capitalize mr-2",children:s.visibility}),e.jsx("div",{onClick:()=>a("visibility"),className:"rotate-270 hover:bg-[#666666] p-2 rounded-full cursor-pointer",children:e.jsx(j,{})})]})]}),e.jsxs("div",{className:"flex justify-between max-w-[700px] 2xl:max-w-[1000px]",children:[e.jsx("div",{className:"",children:"Mature (18+)"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"mr-2",children:s.mature?"On":"Off"}),e.jsx("div",{onClick:()=>a("mature"),className:"rotate-270 hover:bg-[#666666] p-2 rounded-full cursor-pointer",children:e.jsx(j,{})})]})]})]}),e.jsx("div",{className:"text-3xl font-bold",children:"Mature (18+)"}),e.jsxs("div",{className:"my-5 flex",children:[e.jsx("div",{onClick:()=>N("mods"),className:`pr-2 cursor-pointer ${d==="mods"&&"underline font-bold"}`,children:"Moderators"}),e.jsx("div",{onClick:()=>N("members"),className:`px-2 cursor-pointer ${d==="members"&&"underline font-bold"}`,children:"Members"})]}),e.jsxs("div",{className:"flex justify-between font-bold border-y border-[#555555] py-2 mb-5",children:[e.jsx("div",{children:"USERNAME"}),e.jsx("div",{children:"JOINED"})]}),d==="mods"?h?e.jsx("div",{children:"Loading moderators..."}):f?e.jsx("div",{children:"Error loading moderators"}):n?d==="mods"?n.map(i=>{const p=new Date(i.createdAt);return e.jsxs("div",{className:"flex justify-between",children:[e.jsx(C,{to:"/u/$username",params:{username:i.username.toString()},children:e.jsxs("div",{className:"flex",children:[e.jsx("img",{src:i.profilePic||k,alt:"",className:"w-6 h-6 rounded-full object-cover object-center"}),e.jsx("div",{className:"ml-2",children:i.username})]})}),e.jsx("div",{children:p.toLocaleString()})]},i.communityUserId)}):e.jsx("div",{}):e.jsx("div",{}):M?e.jsx("div",{children:"Loading members..."}):S?e.jsx("div",{children:"Error loading memberes"}):b?b.map(i=>{const p=new Date(i.createdAt);return e.jsxs("div",{className:"flex justify-between",children:[e.jsx(C,{to:"/u/$username",params:{username:i.username.toString()},children:e.jsxs("div",{className:"flex",children:[e.jsx("img",{src:i.profilePic||k,alt:"",className:"w-6 h-6 rounded-full object-cover object-center"}),e.jsx("div",{className:"ml-2",children:i.username})]})}),e.jsx("div",{children:p.toLocaleString()})]},i.communityUserId)}):e.jsx("div",{}),x==="description"?e.jsxs("div",{children:[e.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#222222] p-6 rounded shadow-lg w-[90%] max-w-md  z-100",children:e.jsxs("form",{action:"",className:"flex flex-col",children:[e.jsx("div",{className:"text-2xl mb-5",children:"Description"}),e.jsx("textarea",{className:"bg-[#444444] p-3 mx-auto mb-5 w-full rounded-xl",value:$,onChange:i=>g(i.target.value)}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("div",{onClick:()=>{a("none"),g(s.description)},className:"mx-1 bg-[#444444] hover:bg-[#555555] px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:"Cancel"}),e.jsx("div",{className:"mx-1 bg-cyan-600 hover:bg-cyan-500 px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:"Save"})]})]})}),e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-90"})]}):x==="mature"?e.jsxs("div",{children:[e.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#222222] p-6 rounded shadow-lg w-[90%] max-w-md  z-100",children:e.jsxs("form",{className:"flex flex-col",children:[e.jsx("div",{className:"text-2xl mb-5",children:"Mature (18+)"}),e.jsx("div",{onClick:()=>y(!t),className:"",children:e.jsxs("div",{className:`inline-flex items-center justify-center gap-0 mb-2 ${t?"bg-cyan-500":"bg-[#666666]"} rounded-full shadow-[inset_-1px_0px_4.8px_rgba(0,0,0,0.5)]`,children:[e.jsx("div",{className:`h-[25px] w-[25px] rounded-full font-bold text-lg tracking-wide transition-all duration-300 ease-in-out ${t?"bg-transparent":"bg-white"}`,style:{fontFamily:"'Nunito Sans', sans-serif"}}),e.jsx("div",{className:`h-[25px] w-[25px] rounded-full font-bold text-lg tracking-wide transition-all duration-300 ease-in-out ${t?"bg-white":"bg-transparent"}`,style:{fontFamily:"'Nunito Sans', sans-serif"}})]})}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("div",{onClick:()=>{a("none"),y(s.mature)},className:"mx-1 bg-[#444444] hover:bg-[#555555] px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:"Cancel"}),e.jsx("div",{onClick:()=>{w||P({communityId:s.communityId,mature:t},{onSuccess:()=>{a("none")}})},className:"mx-1 bg-cyan-600 hover:bg-cyan-500 px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:w?"Saving...":"Save"})]})]})}),e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-90"})]}):x==="visibility"?e.jsxs("div",{className:"",children:[e.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#222222] p-6 rounded shadow-lg w-[90%] max-w-md  z-100",children:e.jsxs("form",{action:"",className:"flex flex-col",children:[e.jsx("div",{className:"text-2xl mb-5",children:"Visibility"}),e.jsxs("div",{onClick:()=>o("public"),className:`p-2 cursor-pointer ${u==="public"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Public"}),e.jsx("div",{className:"text-xs",children:"Anyone can view, post and comment"})]}),e.jsxs("div",{onClick:()=>o("restricted"),className:`p-2 cursor-pointer ${u==="restricted"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Restricted"}),e.jsx("div",{className:"text-xs",children:"Anyone can view, but only approved users can contribute"})]}),e.jsxs("div",{onClick:()=>o("private"),className:`p-2 cursor-pointer mb-5 ${u==="private"&&"bg-[#555555]"}`,children:[e.jsx("div",{children:"Private"}),e.jsx("div",{className:"text-xs",children:"Only approved users can view and contribute"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("div",{onClick:()=>{a("none"),o(s.visibility)},className:"mx-1 bg-[#444444] hover:bg-[#555555] px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:"Cancel"}),e.jsx("div",{className:"mx-1 bg-cyan-600 hover:bg-cyan-500 px-2 py-1 rounded-full cursor-pointer transition-all ease-in-out duration-300",children:"Save"})]})]})}),e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-90"})]}):e.jsx("div",{})]}):e.jsx("div",{})})}export{B as component};
