import{r as i,c,u as x,j as e,L as u,g as m}from"./index-DW-8qFQi.js";import{d as p,F as f,V as h,M as j,u as v}from"./Menu-CRHUiRFH.js";function b(s){const[a,l]=i.useState(!1),[o,d]=i.useState(!1),{mutate:r}=c(),{user:n}=x();return e.jsxs("div",{className:"mx-auto w-full lg:w-[50%] 2xl:w-[750px] border-t border-[#636363]",children:[e.jsxs(u,{to:"/posts/$postId",params:{postId:s.post.postId.toString()},children:[e.jsxs("div",{className:"relative my-1 rounded p-5 hover:bg-[#333333] transition-all ease-in-out duration-300",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex text-[#bdbdbd] text-sm",children:[e.jsx("div",{className:"font-bold",children:s.post.username}),e.jsx("div",{className:"px-1",children:"•"}),e.jsx("div",{children:p(s.post.createdAt)})]}),e.jsx("div",{onClick:t=>{t.stopPropagation(),t.preventDefault(),l(!a)},className:"absolute top-1 right-1 p-3 rounded-full hover:bg-[#575757] transition-all ease-in-out duration-300",children:e.jsx(f,{})})]}),e.jsx("div",{className:"text-2xl font-bold",children:s.post.title}),e.jsx("div",{className:"my-2",children:s.post.content}),e.jsx(h,{post:s.post}),a&&e.jsx(j,{post:s.post,setDeleteMode:d,setShowMenu:l})]}),n&&s.post.userId===n.userId&&o&&e.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#222222] p-6 rounded shadow-lg w-[90%] max-w-md text-center z-100",children:[e.jsx("div",{className:"text-2xl font-bold",children:"Delete Post?"}),e.jsx("div",{className:"my-5",children:"Once you delete this post, it can’t be restored."}),e.jsxs("div",{className:"my-5 flex justify-end",children:[e.jsx("div",{onClick:t=>{t.stopPropagation(),t.preventDefault(),r({postId:s.post.postId}),d(!1)},className:"p-2 mr-1 bg-red-500 rounded text-white bold secondary-font font-bold cursor-pointer",children:"DELETE"}),e.jsx("div",{onClick:t=>{t.stopPropagation(),t.preventDefault(),d(!1)},className:"p-2 ml-1 bg-[#5c5c5c] rounded bold secondary-font font-bold cursor-pointer",children:"CANCEL"})]})]})]},s.post.postId),n&&s.post.userId===n.userId&&o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-60"})]})}function y(){const{data:s,isPending:a,isError:l}=v(m());return e.jsxs("div",{className:"flex-1 p-2",children:[e.jsx("div",{className:"text-center text-cyan-500 text-2xl font-bold pt-20 pb-5",children:"Index"}),e.jsx("div",{className:"flex flex-col",children:l?e.jsx("div",{className:"mx-auto w-full lg:w-[50%]",children:"Error fetching posts"}):a?e.jsx("div",{className:"mx-auto w-full lg:w-[50%]",children:"Loading..."}):s?.map(o=>e.jsx(b,{post:o},o.postId))})]})}export{y as component};
