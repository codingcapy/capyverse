import{M as e,G as n,H as o,J as s,K as l}from"./index-DADqQpbt.js";function p(t){return e({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"},child:[]}]})(t)}function y(t){return e({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"},child:[]}]})(t)}function v(t){return e({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"},child:[]}]})(t)}function I(t){return e({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M229.66,141.66l-96,96a8,8,0,0,1-11.32,0l-96-96A8,8,0,0,1,32,128H72V48A16,16,0,0,1,88,32h80a16,16,0,0,1,16,16v80h40a8,8,0,0,1,5.66,13.66Z"},child:[]}]})(t)}function A(t){return e({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M231.39,123.06A8,8,0,0,1,224,128H184v80a16,16,0,0,1-16,16H88a16,16,0,0,1-16-16V128H32a8,8,0,0,1-5.66-13.66l96-96a8,8,0,0,1,11.32,0l96,96A8,8,0,0,1,231.39,123.06Z"},child:[]}]})(t)}function B(t){return e({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M231.39,132.94A8,8,0,0,0,224,128H184V48a16,16,0,0,0-16-16H88A16,16,0,0,0,72,48v80H32a8,8,0,0,0-5.66,13.66l96,96a8,8,0,0,0,11.32,0l96-96A8,8,0,0,0,231.39,132.94ZM128,220.69,51.31,144H80a8,8,0,0,0,8-8V48h80v88a8,8,0,0,0,8,8h28.69Z"},child:[]}]})(t)}function C(t){return e({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M229.66,114.34l-96-96a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,32,128H72v80a16,16,0,0,0,16,16h80a16,16,0,0,0,16-16V128h40a8,8,0,0,0,5.66-13.66ZM176,112a8,8,0,0,0-8,8v88H88V120a8,8,0,0,0-8-8H51.31L128,35.31,204.69,112Z"},child:[]}]})(t)}function M(t){return e({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"},child:[]}]})(t)}function u(t){return{...t,createdAt:new Date(t.createdAt)}}function q(){const t=s();return l({mutationFn:async({userId:a,file:r,postId:c})=>{new FormData().append("file",r);const i=await(await o.api.v0.images.upload.$post({form:{userId:a,file:r,postId:c}})).json();if(!i.success)throw new Error(i.error);return{cloudFrontUrl:i.cloudFrontUrl,userId:a}},onSettled:a=>{if(!a)return console.log(a,"create args, returning");t.invalidateQueries({queryKey:["images",a.userId]}),t.invalidateQueries({queryKey:["images"]})}})}async function d(t){const a=await o.api.v0.images[":postId"].$get({param:{postId:t.toString()}});if(!a.ok)throw new Error("Error getting images by request");const{images:r}=await a.json();return r.map(u)}const F=t=>n({queryKey:["images",t],queryFn:()=>d(t)});async function g(t){const a=await o.api.v0.images.user[":userId"].$get({param:{userId:t.toString()}});if(!a.ok)throw new Error("Error getting images by request");const{images:r}=await a.json();return r.map(u)}const H=t=>n({queryKey:["images",t],queryFn:()=>g(t)});async function h(t){const a=await o.api.v0.images.delete.$post({json:t});if(!a.ok)throw new Error("Error deleting image.");const{newImage:r}=await a.json();return console.log(r),r}const P=()=>{const t=s();return l({mutationFn:h,onSettled:a=>{a&&(t.invalidateQueries({queryKey:["images",a.postId]}),t.invalidateQueries({queryKey:["images"]}))}})};export{M as P,P as a,p as b,F as c,y as d,v as e,A as f,H as g,C as h,I as i,B as j,q as u};
